language: python
python:
  - 3.6
before_install: cd src
install: 
  - pip install pytest
  - pip install pytest-cov
  - pip install coveralls
  - pip install -r requirements.txt
script:
  - pytest --cov=india_stock_markets
  - python3 setup.py sdist bdist_wheel
after_success:
  - COVERALLS_REPO_TOKEN=$coveralls_token coveralls
deploy:
  provider: pypi
  user: $pypi_user
  password: $pypi_password
  on:
    tags: true